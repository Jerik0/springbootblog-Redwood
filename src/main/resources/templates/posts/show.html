<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head th:replace="fragments/head :: head('View Post')">
</head>
<body>
  <div th:replace="fragments/topbar :: top-bar"></div>
  <div th:replace="fragments/navbar :: nav-bar"></div>
  <div th:replace="fragments/titlediv :: titlediv(${post.title})"></div>

  <!--<span id="post-owner-name">-->
    <span id="post-owner-name">By
      <a th:href="${'/user/' + post.owner.id + '/view'}" th:text="${post.owner.username}"></a>
    </span>
  <!--</span>-->

  <p id="post-body" th:text="${post.body}"></p>

  <div th:if="${isPostOwner}">
    <form th:action="${'/posts/' + post.id + '/delete'}" th:object="${post}" th:method="post">
    <button>Delete</button>
    </form>
  </div>

  <form sec:authorize="isAuthenticated()" th:method="post" th:action="${'/comments/' + post.id}" th:object="${comment}">
    <textarea rows="5" cols="40" placeholder="Comment" th:field="*{body}"></textarea>
    <input type="submit"/>
  </form>

  <div th:each="comment : ${post.comments}" class="comment">
    <p th:text="${comment.body}"></p>
    <form th:if="${isPostOwner}" th:action="${'/comments/' + comment.id + '/delete/' + post.id}" th:object="${comment}" th:method="post">
      <button>Delete</button>
    </form>
  </div>

</body>
<script th:replace="fragments/script :: script"></script>
</html>